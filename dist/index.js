"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.prime = exports.progression = exports.gcd = exports.calc = exports.evenParity = exports.printGreeting = void 0;

var _readlineSync = _interopRequireDefault(require("readline-sync"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// Фукнция-генератор случайного целого числа в заданном диапазоне
const randomInt = (min, max) => Math.floor(Math.random() * (max - min) + min); // Функция-генератор случайного символа в переданной последовательности (строке)


const randomSym = str => str[Math.floor(Math.random() * str.length)]; // Функция сравнения правильного ответа и ответа, полученного от пользователя


const compareAnswers = (counter, userName, getAnswer, correctAnswer) => {
  let rCounter;
  let getAnswerNum;
  if (typeof getAnswer === 'string' && typeof correctAnswer === 'number') getAnswerNum = Number(getAnswer);else getAnswerNum = getAnswer;

  if (correctAnswer === getAnswerNum) {
    console.log('Correct!');
    rCounter = counter + 1;
  } else {
    console.log(`"${getAnswerNum}" is wrong answer ;(. Correct answer was "${correctAnswer}". Lets try again, ${userName}!`);
    rCounter = 0;
  }

  return rCounter;
}; // Фунцикция вычисления НОД


const calcNod = (a, b) => {
  let rA;
  let rB;

  while (a !== 0 && b !== 0) {
    if (a > b) rA = a % b;else rB = b % a;
  }

  return rA + rB;
}; // Функция вычисления математических операций


const calcFunc = (rOper, rInt1, rInt2) => {
  let trueAnswer = 0;

  if (rOper === '*') {
    trueAnswer = rInt1 * rInt2;
  } else if (rOper === '+') {
    trueAnswer = rInt1 + rInt2;
  } else trueAnswer = rInt1 - rInt2;

  return trueAnswer;
}; // Функция-генератор арифметической прогрессии с заменой одного элемента


const calcProg = (replaceSymbol, minInt, maxInt, progLen) => {
  let result = '';
  let trueAnswer;
  let progElement = randomInt(minInt, maxInt);
  const progStep = randomInt(minInt, maxInt);
  const replacePosition = randomInt(minInt, maxInt);

  for (let i = 1; i <= progLen; i += 1) {
    if (replacePosition === i) {
      result += `${replaceSymbol}\xa0`;
      trueAnswer = progElement;
    } else result += `${progElement}\xa0`;

    progElement += progStep;
  }

  return {
    result,
    trueAnswer
  };
}; // Функция проверки числа на четность


const parityCheck = rInt => {
  if (rInt % 2 === 0) return 'yes';
  return 'no';
}; // Функция проверки числа на простоту


const IsPrime = num => {
  let d = 2;

  while (num % d !== 0) d += 1;

  if (d === num) return 'yes';
  return 'no';
};

const printGreeting = () => {
  console.log('Welcome to the BrainGames!\n');

  const userName = _readlineSync.default.question('May I have your name? ');

  console.log('Hello, ', userName, '!\n');
  return userName;
};

exports.printGreeting = printGreeting;

const evenParity = (minInt, maxInt, correctAnswerСounter) => {
  let counter = 0;
  const userName = printGreeting();
  console.log('Answer "yes" if the number is even, otherwise answer "no".');

  while (counter < correctAnswerСounter) {
    const rInt = randomInt(minInt, maxInt);
    console.log('Question: ', rInt);
    const correctAnswer = parityCheck(rInt);

    const getAnswer = _readlineSync.default.question('Your answer: ');

    counter = compareAnswers(counter, userName, getAnswer, correctAnswer);
  }

  console.log('Congratulations, ', userName, '!');
};

exports.evenParity = evenParity;

const calc = (mathOperator, minInt, maxInt, correctAnswerСounter) => {
  let counter = 0;
  const userName = printGreeting();
  console.log('What is the result of the expression?');

  while (counter < correctAnswerСounter) {
    const rInt1 = randomInt(minInt, maxInt);
    const rInt2 = randomInt(minInt, maxInt);
    const rOper = randomSym(mathOperator);
    console.log('Question: ', rInt1, rOper, rInt2);
    const correctAnswer = calcFunc(rOper, rInt1, rInt2);

    const getAnswer = _readlineSync.default.question('Your answer: ');

    counter = compareAnswers(counter, userName, getAnswer, correctAnswer);
  }

  console.log('Congratulations, ', userName, '!');
};

exports.calc = calc;

const gcd = (minInt, maxInt, correctAnswerСounter) => {
  let counter = 0;
  const userName = printGreeting();
  console.log('Find the greatest common divisor of given numbers');

  while (counter < correctAnswerСounter) {
    const rInt1 = randomInt(minInt, maxInt);
    const rInt2 = randomInt(minInt, maxInt);
    console.log('Question: ', rInt1, rInt2);
    const correctAnswer = calcNod(rInt1, rInt2);

    const getAnswer = _readlineSync.default.question('Your answer: ');

    counter = compareAnswers(counter, userName, getAnswer, correctAnswer);
  }

  console.log('Congratulations, ', userName, '!');
};

exports.gcd = gcd;

const progression = (replaceSymbol, minInt, maxInt, correctAnswerСounter, progLen) => {
  let counter = 0;
  const userName = printGreeting();
  console.log('What number is missing in the progression?');

  while (counter < correctAnswerСounter) {
    const rProg = calcProg(replaceSymbol, minInt, maxInt, progLen);
    console.log('Question: ', rProg.result);
    const correctAnswer = rProg.trueAnswer;

    const getAnswer = _readlineSync.default.question('Your answer: ');

    counter = compareAnswers(counter, userName, getAnswer, correctAnswer);
  }

  console.log('Congratulations, ', userName, '!');
};

exports.progression = progression;

const prime = (minInt, maxInt, correctAnswerСounter) => {
  let counter = 0;
  const userName = printGreeting();
  console.log('Answer "yes" if given number is prime. Otherwise answer "no".\n');

  while (counter < correctAnswerСounter) {
    const rInt = randomInt(minInt, maxInt);
    console.log('Question: ', rInt);
    const correctAnswer = IsPrime(rInt);

    const getAnswer = _readlineSync.default.question('Your answer: ');

    counter = compareAnswers(counter, userName, getAnswer, correctAnswer);
  }

  console.log('Congratulations, ', userName, '!');
};

exports.prime = prime;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJyYW5kb21JbnQiLCJtaW4iLCJtYXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJyYW5kb21TeW0iLCJzdHIiLCJsZW5ndGgiLCJjb21wYXJlQW5zd2VycyIsImNvdW50ZXIiLCJ1c2VyTmFtZSIsImdldEFuc3dlciIsImNvcnJlY3RBbnN3ZXIiLCJyQ291bnRlciIsImdldEFuc3dlck51bSIsIk51bWJlciIsImNvbnNvbGUiLCJsb2ciLCJjYWxjTm9kIiwiYSIsImIiLCJyQSIsInJCIiwiY2FsY0Z1bmMiLCJyT3BlciIsInJJbnQxIiwickludDIiLCJ0cnVlQW5zd2VyIiwiY2FsY1Byb2ciLCJyZXBsYWNlU3ltYm9sIiwibWluSW50IiwibWF4SW50IiwicHJvZ0xlbiIsInJlc3VsdCIsInByb2dFbGVtZW50IiwicHJvZ1N0ZXAiLCJyZXBsYWNlUG9zaXRpb24iLCJpIiwicGFyaXR5Q2hlY2siLCJySW50IiwiSXNQcmltZSIsIm51bSIsImQiLCJwcmludEdyZWV0aW5nIiwicmVhZGxpbmVTeW5jIiwicXVlc3Rpb24iLCJldmVuUGFyaXR5IiwiY29ycmVjdEFuc3dlctChb3VudGVyIiwiY2FsYyIsIm1hdGhPcGVyYXRvciIsImdjZCIsInByb2dyZXNzaW9uIiwiclByb2ciLCJwcmltZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0FBRUE7QUFDQSxNQUFNQSxTQUFTLEdBQUcsQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEtBQWNDLElBQUksQ0FBQ0MsS0FBTCxDQUFXRCxJQUFJLENBQUNFLE1BQUwsTUFBaUJILEdBQUcsR0FBR0QsR0FBdkIsSUFBOEJBLEdBQXpDLENBQWhDLEMsQ0FFQTs7O0FBQ0EsTUFBTUssU0FBUyxHQUFJQyxHQUFELElBQVNBLEdBQUcsQ0FBQ0osSUFBSSxDQUFDQyxLQUFMLENBQVdELElBQUksQ0FBQ0UsTUFBTCxLQUFnQkUsR0FBRyxDQUFDQyxNQUEvQixDQUFELENBQTlCLEMs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RUFBK0JDLGFBQS9CLENBQXhCO0FBQ0Q7O0FBQ0RJLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLG1CQUFaLEVBQWlDUCxRQUFqQyxFQUEyQyxHQUEzQztBQUNELENBWk0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcmVhZGxpbmVTeW5jIGZyb20gJ3JlYWRsaW5lLXN5bmMnO1xuXG4vLyDQpNGD0LrQvdGG0LjRjy3Qs9C10L3QtdGA0LDRgtC+0YAg0YHQu9GD0YfQsNC50L3QvtCz0L4g0YbQtdC70L7Qs9C+INGH0LjRgdC70LAg0LIg0LfQsNC00LDQvdC90L7QvCDQtNC40LDQv9Cw0LfQvtC90LVcbmNvbnN0IHJhbmRvbUludCA9IChtaW4sIG1heCkgPT4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW4pO1xuXG4vLyDQpNGD0L3QutGG0LjRjy3Qs9C10L3QtdGA0LDRgtC+0YAg0YHQu9GD0YfQsNC50L3QvtCz0L4g0YHQuNC80LLQvtC70LAg0LIg0L/QtdGA0LXQtNCw0L3QvdC+0Lkg0L/QvtGB0LvQtdC00L7QstCw0YLQtdC70YzQvdC+0YHRgtC4ICjRgdGC0YDQvtC60LUpXG5jb25zdCByYW5kb21TeW0gPSAoc3RyKSA9PiBzdHJbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc3RyLmxlbmd0aCldO1xuXG4vLyDQpNGD0L3QutGG0LjRjyDRgdGA0LDQstC90LXQvdC40Y8g0L/RgNCw0LLQuNC70YzQvdC+0LPQviDQvtGC0LLQtdGC0LAg0Lgg0L7RgtCy0LXRgtCwLCDQv9C+0LvRg9GH0LXQvdC90L7Qs9C+INC+0YIg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXG5jb25zdCBjb21wYXJlQW5zd2VycyA9IChjb3VudGVyLCB1c2VyTmFtZSwgZ2V0QW5zd2VyLCBjb3JyZWN0QW5zd2VyKSA9PiB7XG4gIGxldCByQ291bnRlcjtcbiAgbGV0IGdldEFuc3dlck51bTtcbiAgaWYgKCh0eXBlb2YgKGdldEFuc3dlcikgPT09ICdzdHJpbmcnKSAmJiAodHlwZW9mIChjb3JyZWN0QW5zd2VyKSA9PT0gJ251bWJlcicpKSBnZXRBbnN3ZXJOdW0gPSBOdW1iZXIoZ2V0QW5zd2VyKTtcbiAgZWxzZSBnZXRBbnN3ZXJOdW0gPSBnZXRBbnN3ZXI7XG4gIGlmIChjb3JyZWN0QW5zd2VyID09PSBnZXRBbnN3ZXJOdW0pIHtcbiAgICBjb25zb2xlLmxvZygnQ29ycmVjdCEnKTtcbiAgICByQ291bnRlciA9IGNvdW50ZXIgKyAxO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUubG9nKGBcIiR7Z2V0QW5zd2VyTnVtfVwiIGlzIHdyb25nIGFuc3dlciA7KC4gQ29ycmVjdCBhbnN3ZXIgd2FzIFwiJHtjb3JyZWN0QW5zd2VyfVwiLiBMZXRzIHRyeSBhZ2FpbiwgJHt1c2VyTmFtZX0hYCk7XG4gICAgckNvdW50ZXIgPSAwO1xuICB9XG4gIHJldHVybiByQ291bnRlcjtcbn07XG5cbi8vINCk0YPQvdGG0LjQutGG0LjRjyDQstGL0YfQuNGB0LvQtdC90LjRjyDQndCe0JRcbmNvbnN0IGNhbGNOb2QgPSAoYSwgYikgPT4ge1xuICBsZXQgckE7IGxldCByQjtcbiAgd2hpbGUgKGEgIT09IDAgJiYgYiAhPT0gMCkge1xuICAgIGlmIChhID4gYikgckEgPSBhICUgYjtcbiAgICBlbHNlIHJCID0gYiAlIGE7XG4gIH1cbiAgcmV0dXJuIHJBICsgckI7XG59O1xuXG4vLyDQpNGD0L3QutGG0LjRjyDQstGL0YfQuNGB0LvQtdC90LjRjyDQvNCw0YLQtdC80LDRgtC40YfQtdGB0LrQuNGFINC+0L/QtdGA0LDRhtC40LlcbmNvbnN0IGNhbGNGdW5jID0gKHJPcGVyLCBySW50MSwgckludDIpID0+IHtcbiAgbGV0IHRydWVBbnN3ZXIgPSAwO1xuICBpZiAock9wZXIgPT09ICcqJykge1xuICAgIHRydWVBbnN3ZXIgPSBySW50MSAqIHJJbnQyO1xuICB9IGVsc2UgaWYgKHJPcGVyID09PSAnKycpIHtcbiAgICB0cnVlQW5zd2VyID0gckludDEgKyBySW50MjtcbiAgfSBlbHNlIHRydWVBbnN3ZXIgPSBySW50MSAtIHJJbnQyO1xuICByZXR1cm4gdHJ1ZUFuc3dlcjtcbn07XG5cbi8vINCk0YPQvdC60YbQuNGPLdCz0LXQvdC10YDQsNGC0L7RgCDQsNGA0LjRhNC80LXRgtC40YfQtdGB0LrQvtC5INC/0YDQvtCz0YDQtdGB0YHQuNC4INGBINC30LDQvNC10L3QvtC5INC+0LTQvdC+0LPQviDRjdC70LXQvNC10L3RgtCwXG5jb25zdCBjYWxjUHJvZyA9IChyZXBsYWNlU3ltYm9sLCBtaW5JbnQsIG1heEludCwgcHJvZ0xlbikgPT4ge1xuICBsZXQgcmVzdWx0ID0gJyc7XG4gIGxldCB0cnVlQW5zd2VyO1xuICBsZXQgcHJvZ0VsZW1lbnQgPSByYW5kb21JbnQobWluSW50LCBtYXhJbnQpO1xuICBjb25zdCBwcm9nU3RlcCA9IHJhbmRvbUludChtaW5JbnQsIG1heEludCk7XG4gIGNvbnN0IHJlcGxhY2VQb3NpdGlvbiA9IHJhbmRvbUludChtaW5JbnQsIG1heEludCk7XG4gIGZvciAobGV0IGkgPSAxOyBpIDw9IHByb2dMZW47IGkgKz0gMSkge1xuICAgIGlmIChyZXBsYWNlUG9zaXRpb24gPT09IGkpIHtcbiAgICAgIHJlc3VsdCArPSBgJHtyZXBsYWNlU3ltYm9sfVxceGEwYDtcbiAgICAgIHRydWVBbnN3ZXIgPSBwcm9nRWxlbWVudDtcbiAgICB9IGVsc2UgcmVzdWx0ICs9IGAke3Byb2dFbGVtZW50fVxceGEwYDtcbiAgICBwcm9nRWxlbWVudCArPSBwcm9nU3RlcDtcbiAgfVxuICByZXR1cm4geyByZXN1bHQsIHRydWVBbnN3ZXIgfTtcbn07XG5cbi8vINCk0YPQvdC60YbQuNGPINC/0YDQvtCy0LXRgNC60Lgg0YfQuNGB0LvQsCDQvdCwINGH0LXRgtC90L7RgdGC0YxcbmNvbnN0IHBhcml0eUNoZWNrID0gKHJJbnQpID0+IHtcbiAgaWYgKChySW50ICUgMikgPT09IDApIHJldHVybiAneWVzJztcbiAgcmV0dXJuICdubyc7XG59O1xuXG4vLyDQpNGD0L3QutGG0LjRjyDQv9GA0L7QstC10YDQutC4INGH0LjRgdC70LAg0L3QsCDQv9GA0L7RgdGC0L7RgtGDXG5jb25zdCBJc1ByaW1lID0gKG51bSkgPT4ge1xuICBsZXQgZCA9IDI7XG4gIHdoaWxlIChudW0gJSBkICE9PSAwKSBkICs9IDE7XG4gIGlmIChkID09PSBudW0pIHJldHVybiAneWVzJztcbiAgcmV0dXJuICdubyc7XG59O1xuXG5leHBvcnQgY29uc3QgcHJpbnRHcmVldGluZyA9ICgpID0+IHtcbiAgY29uc29sZS5sb2coJ1dlbGNvbWUgdG8gdGhlIEJyYWluR2FtZXMhXFxuJyk7XG4gIGNvbnN0IHVzZXJOYW1lID0gcmVhZGxpbmVTeW5jLnF1ZXN0aW9uKCdNYXkgSSBoYXZlIHlvdXIgbmFtZT8gJyk7XG4gIGNvbnNvbGUubG9nKCdIZWxsbywgJywgdXNlck5hbWUsICchXFxuJyk7XG4gIHJldHVybiB1c2VyTmFtZTtcbn07XG5cbmV4cG9ydCBjb25zdCBldmVuUGFyaXR5ID0gKG1pbkludCwgbWF4SW50LCBjb3JyZWN0QW5zd2Vy0KFvdW50ZXIpID0+IHtcbiAgbGV0IGNvdW50ZXIgPSAwO1xuICBjb25zdCB1c2VyTmFtZSA9IHByaW50R3JlZXRpbmcoKTtcbiAgY29uc29sZS5sb2coJ0Fuc3dlciBcInllc1wiIGlmIHRoZSBudW1iZXIgaXMgZXZlbiwgb3RoZXJ3aXNlIGFuc3dlciBcIm5vXCIuJyk7XG4gIHdoaWxlIChjb3VudGVyIDwgY29ycmVjdEFuc3dlctChb3VudGVyKSB7XG4gICAgY29uc3QgckludCA9IHJhbmRvbUludChtaW5JbnQsIG1heEludCk7XG4gICAgY29uc29sZS5sb2coJ1F1ZXN0aW9uOiAnLCBySW50KTtcbiAgICBjb25zdCBjb3JyZWN0QW5zd2VyID0gcGFyaXR5Q2hlY2sockludCk7XG4gICAgY29uc3QgZ2V0QW5zd2VyID0gcmVhZGxpbmVTeW5jLnF1ZXN0aW9uKCdZb3VyIGFuc3dlcjogJyk7XG4gICAgY291bnRlciA9IGNvbXBhcmVBbnN3ZXJzKGNvdW50ZXIsIHVzZXJOYW1lLCBnZXRBbnN3ZXIsIGNvcnJlY3RBbnN3ZXIpO1xuICB9XG4gIGNvbnNvbGUubG9nKCdDb25ncmF0dWxhdGlvbnMsICcsIHVzZXJOYW1lLCAnIScpO1xufTtcblxuZXhwb3J0IGNvbnN0IGNhbGMgPSAobWF0aE9wZXJhdG9yLCBtaW5JbnQsIG1heEludCwgY29ycmVjdEFuc3dlctChb3VudGVyKSA9PiB7XG4gIGxldCBjb3VudGVyID0gMDtcbiAgY29uc3QgdXNlck5hbWUgPSBwcmludEdyZWV0aW5nKCk7XG4gIGNvbnNvbGUubG9nKCdXaGF0IGlzIHRoZSByZXN1bHQgb2YgdGhlIGV4cHJlc3Npb24/Jyk7XG4gIHdoaWxlIChjb3VudGVyIDwgY29ycmVjdEFuc3dlctChb3VudGVyKSB7XG4gICAgY29uc3QgckludDEgPSByYW5kb21JbnQobWluSW50LCBtYXhJbnQpO1xuICAgIGNvbnN0IHJJbnQyID0gcmFuZG9tSW50KG1pbkludCwgbWF4SW50KTtcbiAgICBjb25zdCByT3BlciA9IHJhbmRvbVN5bShtYXRoT3BlcmF0b3IpO1xuICAgIGNvbnNvbGUubG9nKCdRdWVzdGlvbjogJywgckludDEsIHJPcGVyLCBySW50Mik7XG4gICAgY29uc3QgY29ycmVjdEFuc3dlciA9IGNhbGNGdW5jKHJPcGVyLCBySW50MSwgckludDIpO1xuICAgIGNvbnN0IGdldEFuc3dlciA9IHJlYWRsaW5lU3luYy5xdWVzdGlvbignWW91ciBhbnN3ZXI6ICcpO1xuICAgIGNvdW50ZXIgPSBjb21wYXJlQW5zd2Vycyhjb3VudGVyLCB1c2VyTmFtZSwgZ2V0QW5zd2VyLCBjb3JyZWN0QW5zd2VyKTtcbiAgfVxuICBjb25zb2xlLmxvZygnQ29uZ3JhdHVsYXRpb25zLCAnLCB1c2VyTmFtZSwgJyEnKTtcbn07XG5cbmV4cG9ydCBjb25zdCBnY2QgPSAobWluSW50LCBtYXhJbnQsIGNvcnJlY3RBbnN3ZXLQoW91bnRlcikgPT4ge1xuICBsZXQgY291bnRlciA9IDA7XG4gIGNvbnN0IHVzZXJOYW1lID0gcHJpbnRHcmVldGluZygpO1xuICBjb25zb2xlLmxvZygnRmluZCB0aGUgZ3JlYXRlc3QgY29tbW9uIGRpdmlzb3Igb2YgZ2l2ZW4gbnVtYmVycycpO1xuICB3aGlsZSAoY291bnRlciA8IGNvcnJlY3RBbnN3ZXLQoW91bnRlcikge1xuICAgIGNvbnN0IHJJbnQxID0gcmFuZG9tSW50KG1pbkludCwgbWF4SW50KTtcbiAgICBjb25zdCBySW50MiA9IHJhbmRvbUludChtaW5JbnQsIG1heEludCk7XG4gICAgY29uc29sZS5sb2coJ1F1ZXN0aW9uOiAnLCBySW50MSwgckludDIpO1xuICAgIGNvbnN0IGNvcnJlY3RBbnN3ZXIgPSBjYWxjTm9kKHJJbnQxLCBySW50Mik7XG4gICAgY29uc3QgZ2V0QW5zd2VyID0gcmVhZGxpbmVTeW5jLnF1ZXN0aW9uKCdZb3VyIGFuc3dlcjogJyk7XG4gICAgY291bnRlciA9IGNvbXBhcmVBbnN3ZXJzKGNvdW50ZXIsIHVzZXJOYW1lLCBnZXRBbnN3ZXIsIGNvcnJlY3RBbnN3ZXIpO1xuICB9XG4gIGNvbnNvbGUubG9nKCdDb25ncmF0dWxhdGlvbnMsICcsIHVzZXJOYW1lLCAnIScpO1xufTtcblxuZXhwb3J0IGNvbnN0IHByb2dyZXNzaW9uID0gKHJlcGxhY2VTeW1ib2wsIG1pbkludCwgbWF4SW50LCBjb3JyZWN0QW5zd2Vy0KFvdW50ZXIsIHByb2dMZW4pID0+IHtcbiAgbGV0IGNvdW50ZXIgPSAwO1xuICBjb25zdCB1c2VyTmFtZSA9IHByaW50R3JlZXRpbmcoKTtcbiAgY29uc29sZS5sb2coJ1doYXQgbnVtYmVyIGlzIG1pc3NpbmcgaW4gdGhlIHByb2dyZXNzaW9uPycpO1xuICB3aGlsZSAoY291bnRlciA8IGNvcnJlY3RBbnN3ZXLQoW91bnRlcikge1xuICAgIGNvbnN0IHJQcm9nID0gY2FsY1Byb2cocmVwbGFjZVN5bWJvbCwgbWluSW50LCBtYXhJbnQsIHByb2dMZW4pO1xuICAgIGNvbnNvbGUubG9nKCdRdWVzdGlvbjogJywgclByb2cucmVzdWx0KTtcbiAgICBjb25zdCBjb3JyZWN0QW5zd2VyID0gclByb2cudHJ1ZUFuc3dlcjtcbiAgICBjb25zdCBnZXRBbnN3ZXIgPSByZWFkbGluZVN5bmMucXVlc3Rpb24oJ1lvdXIgYW5zd2VyOiAnKTtcbiAgICBjb3VudGVyID0gY29tcGFyZUFuc3dlcnMoY291bnRlciwgdXNlck5hbWUsIGdldEFuc3dlciwgY29ycmVjdEFuc3dlcik7XG4gIH1cbiAgY29uc29sZS5sb2coJ0NvbmdyYXR1bGF0aW9ucywgJywgdXNlck5hbWUsICchJyk7XG59O1xuXG5leHBvcnQgY29uc3QgcHJpbWUgPSAobWluSW50LCBtYXhJbnQsIGNvcnJlY3RBbnN3ZXLQoW91bnRlcikgPT4ge1xuICBsZXQgY291bnRlciA9IDA7XG4gIGNvbnN0IHVzZXJOYW1lID0gcHJpbnRHcmVldGluZygpO1xuICBjb25zb2xlLmxvZygnQW5zd2VyIFwieWVzXCIgaWYgZ2l2ZW4gbnVtYmVyIGlzIHByaW1lLiBPdGhlcndpc2UgYW5zd2VyIFwibm9cIi5cXG4nKTtcbiAgd2hpbGUgKGNvdW50ZXIgPCBjb3JyZWN0QW5zd2Vy0KFvdW50ZXIpIHtcbiAgICBjb25zdCBySW50ID0gcmFuZG9tSW50KG1pbkludCwgbWF4SW50KTtcbiAgICBjb25zb2xlLmxvZygnUXVlc3Rpb246ICcsIHJJbnQpO1xuICAgIGNvbnN0IGNvcnJlY3RBbnN3ZXIgPSBJc1ByaW1lKHJJbnQpO1xuICAgIGNvbnN0IGdldEFuc3dlciA9IHJlYWRsaW5lU3luYy5xdWVzdGlvbignWW91ciBhbnN3ZXI6ICcpO1xuICAgIGNvdW50ZXIgPSBjb21wYXJlQW5zd2Vycyhjb3VudGVyLCB1c2VyTmFtZSwgZ2V0QW5zd2VyLCBjb3JyZWN0QW5zd2VyKTtcbiAgfVxuICBjb25zb2xlLmxvZygnQ29uZ3JhdHVsYXRpb25zLCAnLCB1c2VyTmFtZSwgJyEnKTtcbn07XG4iXX0=